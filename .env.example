# AI Stock Analyzer Configuration

# ===========================================
# Database Configuration (SQLite - Zero Config)
# ===========================================
DATABASE_URL=sqlite:///./data/stock_analyzer.db

# ===========================================
# LLM Configuration - 阿里云百炼（主要）
# Get API Key: https://bailian.console.aliyun.com/
# ===========================================
BAILIAN_API_KEY=your_bailian_api_key_here
BAILIAN_REGION=singapore
BAILIAN_MODEL=qwen-plus

# ===========================================
# LLM Configuration - Google Gemini（备用）
# Get API Key: https://makersuite.google.com/app/apikey
# ===========================================
GEMINI_API_KEY=your_gemini_api_key_here
GEMINI_MODEL=gemini-3-pro-preview

# LLM Routing Strategy
LLM_PRIMARY=bailian
LLM_FALLBACK=gemini

# ===========================================
# Stock List Configuration
# ===========================================
STOCK_LIST=AAPL,TSLA,NVDA,MSFT,GOOGL,AMZN,META

# Discover mode tuning (full-market scan)
# 0 = use full symbol directory (can be heavy in CI)
DISCOVER_UNIVERSE_SIZE=0
DISCOVER_PREFILTER_SIZE=120
DISCOVER_FINAL_SIZE=21
DISCOVER_MAX_NEWS=180

# ===========================================
# RSS Configuration
# ===========================================
# RSSHub URLs (支持多实例failover)
RSSHUB_URLS=https://rsshub.app,https://rsshub.rssforever.com

# ===========================================
# Web Server Configuration
# ===========================================
WEB_HOST=0.0.0.0
WEB_PORT=8000
WEB_DEBUG=false

# ===========================================
# Notification Configuration (Optional)
# Configure at least one channel to receive notifications
# ===========================================

# Telegram Bot
# Get Bot Token: @BotFather -> /newbot
# Get Chat ID: @userinfobot or https://api.telegram.org/bot<TOKEN>/getUpdates
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
TELEGRAM_CHAT_ID=your_chat_id

# DingTalk (钉钉)
# Get Webhook: DingTalk Group -> Group Settings -> Intelligent Group Assistant -> Add Robot -> Custom
DINGTALK_WEBHOOK_URL=https://oapi.dingtalk.com/robot/send?access_token=xxx
DINGTALK_SECRET=optional_secret_for_sign

# Feishu (飞书/Lark)
# Get Webhook: Feishu Group -> Settings -> Bots -> Add Bot -> Custom Bot
FEISHU_WEBHOOK_URL=https://open.feishu.cn/open-apis/bot/v2/hook/xxx

# WeChat Work (企业微信)
# Get Webhook: WeChat Work Group -> Group Settings -> Add Bot
WECHAT_WORK_WEBHOOK_URL=https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=xxx

# ===========================================
# Data Retention
# ===========================================
DATA_RETENTION_DAYS=30

# ===========================================
# IBKR API (Optional, for auto-sync portfolio)
# Mode: auto/socket/cpapi
# ===========================================
IBKR_API_MODE=auto
IBKR_HOST=127.0.0.1
IBKR_PORT=7497
IBKR_CLIENT_ID=21
IBKR_ACCOUNT=
# Note: 7497 is usually paper, 7496 is often live account in common IBKR setups.

# Client Portal API (CPAPI) mode (for web/mobile-only users)
IBKR_CPAPI_BASE_URL=https://localhost:5000/v1/api
IBKR_CPAPI_VERIFY_SSL=false
IBKR_CPAPI_TIMEOUT=12
# Optional: pass cookie if you maintain external CP Gateway session
IBKR_CPAPI_COOKIE=
# Note: GitHub hosted runner cannot access your localhost gateway. Use self-hosted runner for CPAPI.
